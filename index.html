<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MQTT Chatroom</title>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">

    <!-- Scripts -->
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <script defer src="themes.js"></script>
    <script defer src="emoji.js"></script>
    <script defer src="admin.js"></script>
    <script defer src="app.js"></script>
</head>
<body>

<!-- Loading Screen -->


<!-- Login Panel -->
<div id="login" class="panel" style="display:none;">
    <h2>Enter Password</h2>
    <p class="hint">
        Use your access password.  
        Prefix with <b>*67</b> to hide your name.  
        Use <b>*#0*#</b> for the About menu.
    </p>
    <input id="pw" type="password" placeholder="Password">
    <button id="loginBtn">Enter</button>
</div>

<!-- About Menu -->
<div id="aboutMenu" class="panel" style="display:none;">
    <h2>About This Site</h2>
    <p><b>Version:</b> 2.0.0</p>
    <p><b>Creator:</b> Chris & XGFZTeam</p>
    <button onclick="location.reload()">Back</button>
</div>

<!-- Chat UI -->
<div id="chat" style="display:none;">
    <div id="chatContainer">

        <!-- Sidebar -->
        <aside id="sidebar">
            <h3>Chat Info</h3>
            <div id="userInfo">
                <div><b>You:</b> <span id="currentUserLabel"></span></div>
                <div class="subinfo">
                    Broker: flespi<br>
                    Topic: ttg/chat/main
                </div>
            </div>

            <h3>Online</h3>
            <div id="userList"></div>

            <h3>Rooms</h3>
            <div id="roomList"></div>

            <button id="themeToggle">Toggle Theme</button>
            <button id="adminBtn">Admin Panel</button>
        </aside>

        <!-- Main Chat -->
        <main id="mainChat">
            <header id="chatHeader">
                <h2 id="roomTitle">MQTT Chatroom</h2>
                <span class="subinfo">Secure Room</span>
            </header>

            <div id="chatBox"></div>
            <div id="typingIndicator"></div>

            <div id="inputRow">
                <button id="emojiBtn">ðŸ˜Š</button>
                <input id="msg" placeholder="Type a message">
                <button id="sendBtn">Send</button>
            </div>
        </main>
    </div>
</div>

<!-- Emoji Picker -->
<div id="emojiPicker" style="display:none;"></div>

<!-- Admin Panel -->
<div id="adminPanel" style="display:none;">
    <div class="adminContent">
        <h2>Admin Panel</h2>
        <button id="kickBtn">Kick User</button>
        <button id="muteBtn">Mute User</button>
        <button id="announceBtn">Send Announcement</button>
        <button onclick="document.getElementById('adminPanel').style.display='none'">Close</button>
    </div>
</div>

</body>
</html>
